#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npx --no-install commitlint --edit "$1" || {
  echo ""
  echo "Your commit message:"
  echo "----------------------------------------"
  if [ -f "$1" ]; then
    sed '/^[[:space:]]*#/d' "$1" | sed '/^[[:space:]]*$/d'
  else
    echo "(message file not found)"
  fi
  echo "----------------------------------------"
  echo ""
  echo "ğŸ¶ WOOF! WOOF! WOOF! ğŸ¶"
  echo "Naughty dog, no commit biscuit for you!"
  echo "â›” Commit message must follow Conventional Commits."
  echo "   Use one of: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert, tweak"
  echo ""
  echo "   Examples:"
  echo "     feat: add wallet connect button"
  echo "     fix: handle empty wallet address error"
  echo "     feat!: remove legacy auth"
  echo "     BREAKING CHANGE: old /v1 endpoints removed"
  echo '  Everything in lowercase, puppy ~~~~'
  echo "ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶"
  exit 1
}
